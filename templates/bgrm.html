{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Background remover</title>
    
</head>
<body>
     <nav>
    <a href="/">Chatbot</a> |
    <a href="/calc">Calculator</a> |
    <a href="/rmbg">Background Remover</a>
  </nav>
    <h1>Upload an Image to remove background</h1>
    <input type="file" id="imageInput" accept="image/*">
    <button onclick="uploadImage()">Upload</button>
    <div id="result" ></div>


    <script>
    function uploadImage() {
        const imageInput = document.getElementById('imageInput');
        const file = imageInput.files[0];

        if (!file) {
            document.getElementById('result').innerText = 'Please select an image file.';
            return;
        }

        // Create a FormData object
        const formData = new FormData();
        formData.append('image', file);

        // Use Fetch API to send the image to the server
        fetch('/rmbg', {
            method: 'POST',
            body: formData
        })
        .then(response => response.blob())
        .then(blob => {
            // Create a URL for the blob
            const objectURL = URL.createObjectURL(blob);

            // Set the src of an img element to display the image
            const imgElement = document.createElement('img');
            imgElement.src = objectURL;
            imgElement.alt = 'Processed Image';
            imgElement.style.width = '300px';  // Set desired width
            imgElement.style.height = 'auto';

            // Clear previous results
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '';
            resultDiv.appendChild(imgElement);
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('result').innerText = 'An error occurred during upload.';
        });
    }
</script>
</body>
</html> {% endcomment %}

{% extends "base.html" %}

{% block title %}Background Remover{% endblock %}

{% block content %}
<h1>Upload an Image to remove background</h1>
<input type="file" id="imageInput" accept="image/*">
<button onclick="uploadImage()">Upload</button>
<div id="result"></div>

<script>
function uploadImage() {
  const imageInput = document.getElementById('imageInput');
  const file = imageInput.files[0];

  if (!file) {
    document.getElementById('result').innerText = 'Please select an image file.';
    return;
  }

  const formData = new FormData();
  formData.append('image', file);

  fetch('/rmbg', {
    method: 'POST',
    body: formData
  })
  .then(response => response.blob())
  .then(blob => {
    const objectURL = URL.createObjectURL(blob);
    const imgElement = document.createElement('img');
    imgElement.src = objectURL;
    imgElement.alt = 'Processed Image';
    imgElement.style.width = '300px';
    imgElement.style.height = 'auto';

    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = '';
    resultDiv.appendChild(imgElement);
  })
  .catch(error => {
    console.error('Error:', error);
    document.getElementById('result').innerText = 'An error occurred during upload.';
  });
}
</script>
{% endblock %}
